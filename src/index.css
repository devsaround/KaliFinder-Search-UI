/**
 * KaliFinder Search Widget - Main Stylesheet
 * Production-ready, modular CSS architecture following industry best practices
 * 
 * Architecture:
 * - Base: Variables, reset, typography
 * - Layout: Widget structure, modal, containers
 * - Components: Filters, dropdowns, checkboxes, accordions
 * - Utilities: Animations, helpers
 * 
 * Benefits:
 * - Easy to maintain (small, focused files)
 * - No duplication (CSS variables)
 * - Consistent design system
 * - Simple to extend
 */

/* ========================================
   TAILWIND CSS v4
   ======================================== */

@import 'tailwindcss';
@source './{app,components,pages,src}/**/*.{ts,tsx,js,jsx,html}';

/* ========================================
   BASE STYLES
   ======================================== */

@import './styles/base/variables.css';
@import './styles/base/reset.css';

/* ========================================
   LAYOUT
   ======================================== */

@import './styles/layout/widget-container.css';

/* ========================================
   COMPONENTS
   ======================================== */

@import './styles/components/filters.css';
@import './styles/components/checkbox.css';
@import './styles/components/dropdown.css';
@import './styles/components/slider.css';

/* ========================================
   UTILITIES
   ======================================== */

@import './styles/utilities/animations.css';
@import './styles/utilities/helpers.css';
@import './styles/utilities/responsive.css';
@import './styles/utilities/mobile-cross-browser.css';

/* ========================================
   TAILWIND THEME OVERRIDES
   ======================================== */

@theme {
  /* Radius tokens */
  --radius: var(--radius-lg);
  --radius-lg: var(--radius-lg);
  --radius-md: var(--radius-md);
  --radius-sm: var(--radius-sm);

  /* Semantic colors for Tailwind utilities */
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-background: var(--background);
  --color-foreground: var(--foreground);

  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary-hover: var(--primary-hover);

  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);

  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);

  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);

  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);

  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);

  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);

  /* Search-specific colors */
  --color-search-highlight: var(--search-highlight);
  --color-search-bar: var(--search-bar);
  --color-filter-bg: var(--filter-bg);
  --color-loading: var(--loading);
  --color-loading-shimmer: var(--loading-shimmer);
}

@supports (padding: env(safe-area-inset-top)) {
  .pt-safe {
    padding-top: env(safe-area-inset-top);
  }
}

@supports not (padding: env(safe-area-inset-top)) {
  .pt-safe {
    padding-top: 0;
  }
}

/* Bottom safe area for mobile browser bars */
@supports (padding: env(safe-area-inset-bottom)) {
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .bottom-safe {
    bottom: calc(1rem + env(safe-area-inset-bottom));
  }

  /* Extra padding for mobile browser navigation bars (typically 40-60px) */
  @media (max-width: 767px) {
    .bottom-safe {
      /* Base spacing + safe area + browser bar (2.5rem = 40px typical browser bar height) */
      bottom: calc(1rem + env(safe-area-inset-bottom) + 2.5rem) !important;
    }
  }

  @media (min-width: 768px) {
    .bottom-safe {
      bottom: calc(1.5rem + env(safe-area-inset-bottom)); /* bottom-6 = 1.5rem */
    }
  }
}

@supports not (padding: env(safe-area-inset-bottom)) {
  .pb-safe {
    padding-bottom: 0;
  }

  /* Fallback: Add extra bottom spacing for mobile browser bars */
  @media (max-width: 767px) {
    .bottom-safe {
      /* Base spacing (1rem = 16px) + browser bar (2.5rem = 40px) = 56px from bottom */
      bottom: calc(1rem + 2.5rem) !important;
    }
  }

  @media (min-width: 768px) {
    .bottom-safe {
      bottom: 1.5rem; /* bottom-6 = 1.5rem */
    }
  }
}

/* ========================================
   NOTES FOR DEVELOPERS
   ========================================
   
   File Structure:
   ├── variables.css (120 lines) - All design tokens
   ├── reset.css (40 lines) - Base styles
   ├── widget-container.css (180 lines) - Layout
   ├── filters.css (150 lines) - Filter components
   ├── checkbox.css (50 lines) - Checkbox styling
   ├── dropdown.css (120 lines) - Dropdown menus
   ├── animations.css (150 lines) - Keyframes
   └── helpers.css (100 lines) - Utilities
   
   Total: ~910 lines (previously 1378 lines)
   Improvement: 34% reduction + much better organization
   
   To add new components:
   1. Create new file in styles/components/
   2. Import it in this file
   3. Use CSS variables from variables.css
   
   To modify colors:
   1. Edit styles/base/variables.css
   2. Changes propagate everywhere automatically
   
   To add animations:
   1. Add keyframe to styles/utilities/animations.css
   2. Create utility class like .kf-animate-{name}
   
   ======================================== */
